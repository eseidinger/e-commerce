<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Order CRUD</title>
</h:head>
<h:body>
    <p:card style="max-width:700px;margin:2em auto;">
        <f:facet name="title">
            <span class="pi pi-shopping-cart" style="margin-right:8px;"></span>Order CRUD
        </f:facet>
        <p:messages id="errors" globalOnly="true" styleClass="ui-messages-error" closable="true" />
        <h:form id="dataInput">
            <p:panelGrid columns="2" styleClass="ui-panelgrid-blank" style="margin-bottom:1em;">
                <p:outputLabel value="Customer ID:" />
                <p:inputText value="#{orderBean.order.customerId}" />
                <p:outputLabel value="Order Date:" />
                <p:datePicker value="#{orderBean.order.orderDate}" pattern="yyyy-MM-dd" showIcon="true" timeZone="UTC" />
                <p:outputLabel value="Total Amount:" />
                <p:inputText value="#{orderBean.order.totalAmount}" />
            </p:panelGrid>
            <p:commandButton value="Save" icon="pi pi-save" action="#{orderBean.save}" styleClass="ui-button-success"
                update="errors dataTable dataInput" />
        </h:form>
        <h:form id="dataTable">
            <p:dataTable value="#{orderBean.orders}" var="o" style="margin-top:2em;" paginator="true" rows="10"
                responsiveLayout="scroll">
                <p:column headerText="Order ID">
                    #{o.orderId}
                </p:column>
                <p:column headerText="Customer ID">
                    #{o.customer.customerId}
                </p:column>
                <p:column headerText="Order Date">
                    #{orderBean.getUtcDateInLocalDateFormat(o)}
                </p:column>
                <p:column headerText="Total Amount">
                    #{o.totalAmount}
                </p:column>
                <p:column headerText="Actions">
                    <p:commandButton value="Edit" icon="pi pi-pencil" action="#{orderBean.edit(o)}"
                        styleClass="ui-button-info" update="errors dataInput" />
                    <p:commandButton value="Delete" icon="pi pi-trash" action="#{orderBean.delete(o)}"
                        styleClass="ui-button-danger" update="errors dataTable" />
                </p:column>
            </p:dataTable>
        </h:form>
    </p:card>
</h:body>

</html>